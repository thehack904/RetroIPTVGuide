/* change_tuner.css â€” Reworked Tuner Management page
 * Two-column layout: left = tuner management, right = virtual channels
 */

/* ====================================================================== */
/* Page-scoped CSS variables                                               */
/* ====================================================================== */
.container-change-tuner {
  --panel-bg: rgba(10,12,14,0.72);
  --panel-text: #e8f6f6;
  --panel-border: rgba(255,255,255,0.06);
  --card-head-bg: rgba(255,255,255,0.03);
  --heading-color: #ffffff;
  --heading-weight: 800;

  --label-color: rgba(240,240,240,0.92);
  --muted-color: rgba(220,220,220,0.65);

  --input-bg: rgba(255,255,255,0.04);
  --input-border: rgba(160,200,200,0.18);
  --input-color: #e9f7f7;
  --placeholder-color: rgba(230,230,230,0.42);

  --primary-color: #1ed3ce;
  --primary-hover: #16cfc9;
  --primary-contrast: #ffffff;
  --danger-color: #ff4d4f;

  --focus-border: rgba(30,211,206,0.95);
  --focus-ring: rgba(30,211,206,0.12);
  --box-shadow: 0 8px 22px rgba(0,0,0,0.40);
  --card-border-radius: 10px;

  --dropdown-bg: rgba(22,22,22,0.95);
  --dropdown-color: #edf7f7;

  color: var(--panel-text);
  background: transparent;
}

/* ====================================================================== */
/* Light-theme overrides                                                   */
/* ====================================================================== */
body.light .container-change-tuner {
  --panel-bg: #fff;
  --panel-text: #111;
  --panel-border: rgba(0,0,0,0.08);
  --card-head-bg: rgba(0,0,0,0.02);
  --heading-color: #111;
  --heading-weight: 700;
  --label-color: #333;
  --muted-color: rgba(0,0,0,0.56);
  --input-bg: #fff;
  --input-border: rgba(0,0,0,0.12);
  --input-color: #111;
  --placeholder-color: rgba(0,0,0,0.38);
  --primary-color: #06c;
  --primary-hover: #058;
  --primary-contrast: #ffffff;
  --box-shadow: 0 6px 18px rgba(0,0,0,0.06);
  --dropdown-bg: #fff;
  --dropdown-color: #111;
}

/* ====================================================================== */
/* Page Layout                                                             */
/* ====================================================================== */
.container-change-tuner {
  max-width: 1400px;
  margin: 28px auto 80px;
  padding: 18px;
  box-sizing: border-box;
}

/* Two-column layout */
.tm-layout {
  display: grid;
  grid-template-columns: 3fr 2fr;
  gap: 22px;
  align-items: start;
}

.tm-left,
.tm-right {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* ====================================================================== */
/* Page Header                                                             */
/* ====================================================================== */
.page-header {
  margin: 0 0 4px;
}
.page-header h1 {
  margin: 0 0 4px;
  font-size: 1.6rem;
  color: var(--panel-text);
  font-weight: var(--heading-weight);
}
.page-header .lead {
  margin: 0;
  color: var(--muted-color);
  font-size: 0.96rem;
  line-height: 1.4;
}
.vc-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 0;
}
.vc-header-text { flex: 1; }

/* ====================================================================== */
/* Cards                                                                   */
/* ====================================================================== */
.card {
  background: var(--panel-bg);
  color: var(--panel-text);
  border: 1px solid var(--panel-border);
  border-radius: var(--card-border-radius);
  overflow: hidden;
  box-shadow: var(--box-shadow);
}
.card-head {
  padding: 10px 14px;
  background: var(--card-head-bg);
  border-bottom: 1px solid var(--panel-border);
  display: flex;
  align-items: center;
  gap: 8px;
}
.card-head h2 {
  margin: 0;
  font-size: 1rem;
  color: var(--heading-color);
  font-weight: var(--heading-weight);
  flex: 1;
}
.card-body { padding: 12px 14px; }
.vc-card-body { padding: 0; }

/* Danger card */
.card-danger {
  border-left: 4px solid var(--danger-color);
  background: color-mix(in srgb, var(--panel-bg) 80%, var(--danger-color) 6%);
}
.card-danger .card-head {
  border-bottom-color: color-mix(in srgb, var(--danger-color) 12%, transparent 88%);
}

/* ====================================================================== */
/* Active Tuner Card                                                       */
/* ====================================================================== */
.active-tuner-row {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  flex-wrap: wrap;
}
.active-tuner-controls { flex: 1; min-width: 220px; }
.inline-form {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  margin: 0;
}
.inline-form select {
  flex: 1;
  min-width: 120px;
  padding: 7px 10px;
  border-radius: 6px;
  border: 1px solid var(--input-border);
  background: var(--input-bg);
  color: var(--input-color);
  font-size: 0.94rem;
}

/* Last Sync box */
.last-sync-box {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid var(--panel-border);
  background: var(--input-bg);
  min-width: 140px;
}
.last-sync-label {
  font-size: 0.75rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--muted-color);
}
.sync-status { font-size: 0.88rem; font-weight: 600; }
.sync-ok  { color: #2ad42a; }
.sync-warn { color: #f0a500; }
.sync-none { color: var(--muted-color); }
.sync-dt  { font-size: 0.8rem; color: var(--muted-color); }

/* Auto-refresh row */
.auto-refresh-row {
  margin-top: 12px;
  padding-top: 10px;
  border-top: 1px solid var(--panel-border);
}
.ar-label {
  font-size: 0.88rem;
  font-weight: 600;
  color: var(--label-color);
  white-space: nowrap;
}
.ar-select {
  padding: 6px 8px;
  border-radius: 6px;
  border: 1px solid var(--input-border);
  background: var(--input-bg);
  color: var(--input-color);
  font-size: 0.88rem;
}
.ar-next {
  white-space: nowrap;
}

/* ====================================================================== */
/* Tab Navigation                                                          */
/* ====================================================================== */
.tab-nav {
  display: flex;
  border-bottom: 1px solid var(--panel-border);
  background: var(--card-head-bg);
  padding: 0;
  overflow-x: auto;
}
.tab-btn {
  background: transparent;
  border: none;
  padding: 10px 14px;
  font-size: 0.91rem;
  font-weight: 600;
  color: var(--muted-color);
  cursor: pointer;
  white-space: nowrap;
  border-bottom: 3px solid transparent;
  transition: color 0.15s ease, border-color 0.15s ease;
}
.tab-btn:hover {
  color: var(--panel-text);
  background: color-mix(in srgb, var(--input-bg) 60%, transparent 40%);
}
.tab-btn-active {
  color: var(--primary-color);
  border-bottom-color: var(--primary-color);
}
.tab-panel { display: block; }
.tab-panel[hidden] { display: none; }

/* ====================================================================== */
/* Mode Cards (Add Tuner)                                                  */
/* ====================================================================== */
.mode-label {
  display: block;
  font-size: 0.92rem;
  font-weight: 700;
  color: var(--label-color);
  margin-bottom: 8px;
}
.mode-cards {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 14px;
}
.mode-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 10px 14px;
  border: 2px solid var(--panel-border);
  border-radius: 8px;
  background: var(--input-bg);
  cursor: pointer;
  transition: border-color 0.15s ease, background 0.15s ease;
  min-width: 110px;
  flex: 1;
  text-align: center;
}
.mode-card:hover {
  border-color: color-mix(in srgb, var(--primary-color) 50%, transparent 50%);
  background: color-mix(in srgb, var(--input-bg) 85%, var(--primary-color) 8%);
}
.mode-card-selected {
  border-color: var(--primary-color);
  background: color-mix(in srgb, var(--input-bg) 75%, var(--primary-color) 12%);
}
.mode-check {
  font-size: 1.1rem;
  color: var(--primary-color);
  font-weight: 700;
}
.mode-title {
  font-size: 0.88rem;
  font-weight: 700;
  color: var(--label-color);
}
.mode-sub {
  font-size: 0.78rem;
  color: var(--muted-color);
}

/* ====================================================================== */
/* Form Controls                                                           */
/* ====================================================================== */
.compact-form label {
  display: block;
  margin: 8px 0 5px;
  font-size: 0.93rem;
  color: var(--label-color);
  font-weight: 600;
}
.compact-form input[type="text"],
.compact-form input[type="url"],
.compact-form select,
.compact-form textarea {
  width: 100%;
  padding: 8px 10px;
  border-radius: 6px;
  border: 1px solid var(--input-border);
  background: var(--input-bg);
  color: var(--input-color);
  box-sizing: border-box;
  font-size: 0.93rem;
  transition: box-shadow .12s ease, border-color .12s ease;
}
.container-change-tuner ::placeholder { color: var(--placeholder-color); }
.compact-form input:focus,
.compact-form select:focus,
.compact-form textarea:focus {
  border-color: var(--focus-border);
  box-shadow: 0 0 0 4px var(--focus-ring);
  outline: none;
}

/* ====================================================================== */
/* Buttons                                                                 */
/* ====================================================================== */
button.primary {
  background: var(--primary-color);
  color: var(--primary-contrast);
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  font-weight: 700;
  cursor: pointer;
  font-size: 0.92rem;
  white-space: nowrap;
}
button.primary:hover { background: var(--primary-hover); transform: translateY(-1px); }
button.primary.small { padding: 6px 10px; font-size: 0.84rem; }

button.secondary {
  background: transparent;
  border: 1px solid color-mix(in srgb, var(--panel-border) 70%, transparent 30%);
  padding: 8px 12px;
  border-radius: 6px;
  color: var(--panel-text);
  cursor: pointer;
  font-size: 0.92rem;
  white-space: nowrap;
}
button.secondary:hover { background: color-mix(in srgb, var(--input-bg) 80%, var(--primary-color) 10%); }
button.secondary.small { padding: 5px 9px; font-size: 0.84rem; }

button.danger {
  background: var(--danger-color);
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.92rem;
}
button.danger:disabled { opacity: 0.4; cursor: not-allowed; }

.icon-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  color: var(--muted-color);
  font-size: 1rem;
  padding: 2px 4px;
  border-radius: 4px;
  transition: color 0.12s ease;
}
.icon-btn:hover { color: var(--panel-text); }

/* ====================================================================== */
/* Configured Tuners Table                                                 */
/* ====================================================================== */
.configured-tuners-head {
  display: flex;
  align-items: center;
}
.configured-tuners-head h2 { flex: 1; }

.tuners-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.88rem;
}
.tuners-table th {
  text-align: left;
  padding: 8px 10px;
  font-weight: 700;
  color: var(--muted-color);
  border-bottom: 1px solid var(--panel-border);
  font-size: 0.82rem;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}
.tuners-table td {
  padding: 8px 10px;
  border-bottom: 1px solid color-mix(in srgb, var(--panel-border) 50%, transparent 50%);
  vertical-align: middle;
}
.tuners-table tr:last-child td { border-bottom: none; }
.tuner-row-active td { background: color-mix(in srgb, var(--input-bg) 70%, var(--primary-color) 6%); }

.tuner-name-cell { font-weight: 600; }
.active-indicator {
  color: var(--primary-color);
  font-weight: 700;
  margin-right: 4px;
}

.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 0.82rem;
  font-weight: 600;
  padding: 2px 0;
}
.status-ok   { color: #2ad42a; }
.status-warn { color: #f0a500; }
.status-none { color: var(--muted-color); }

/* ====================================================================== */
/* Virtual Channels Panel                                                  */
/* ====================================================================== */
.vc-enabled-item,
.vc-available-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  border-bottom: 1px solid color-mix(in srgb, var(--panel-border) 60%, transparent 40%);
}
.vc-enabled-item:last-of-type,
.vc-available-item:last-of-type { border-bottom: none; }

.vc-item-left {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  min-width: 0;
}
.vc-item-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}
.vc-item-name {
  font-weight: 700;
  font-size: 0.92rem;
  color: var(--panel-text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.vc-item-sub {
  font-size: 0.8rem;
}

.vc-item-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

/* Toggle switch */
.toggle-switch {
  position: relative;
  display: inline-block;
  width: 42px;
  height: 24px;
  cursor: pointer;
  flex-shrink: 0;
}
.toggle-input {
  opacity: 0;
  width: 0;
  height: 0;
  position: absolute;
}
.toggle-slider {
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0.15);
  border-radius: 24px;
  transition: background 0.2s ease;
}
.toggle-slider::before {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  left: 3px;
  top: 3px;
  background: #fff;
  border-radius: 50%;
  transition: transform 0.2s ease;
  box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}
.toggle-input:checked + .toggle-slider {
  background: var(--primary-color);
}
.toggle-input:checked + .toggle-slider::before {
  transform: translateX(18px);
}
body.light .toggle-slider { background: rgba(0,0,0,0.18); }

.vc-logo-lg {
  width: 32px;
  height: 32px;
  object-fit: contain;
  border-radius: 6px;
  flex-shrink: 0;
}
.vc-logo-sm {
  width: 20px;
  height: 20px;
  object-fit: contain;
  border-radius: 3px;
}

.vc-save-row {
  padding: 10px 14px;
  border-top: 1px solid var(--panel-border);
}

/* ====================================================================== */
/* Collapsible sections                                                    */
/* ====================================================================== */
.card-head-collapsible { padding: 0; }
.collapsible-toggle {
  width: 100%;
  background: transparent;
  border: none;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  cursor: pointer;
  text-align: left;
}
.collapsible-toggle:hover { background: color-mix(in srgb, var(--input-bg) 60%, transparent 40%); }
.collapsible-arrow {
  font-size: 0.75rem;
  color: var(--muted-color);
  width: 14px;
  display: inline-block;
}
.collapsible-heading {
  font-size: 1rem;
  color: var(--heading-color);
  font-weight: var(--heading-weight);
  margin: 0;
  display: inline;
}

/* ====================================================================== */
/* Channel Order                                                           */
/* ====================================================================== */
.channel-order-heading {
  display: inline;
  font-size: 1rem;
  flex: 1;
}
.channel-order-hint {
  font-size: 0.8rem;
}
.channel-order-icon {
  font-size: 0.9rem;
  color: var(--muted-color);
  margin-left: auto;
}

.channel-order-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}
.channel-order-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  border-radius: 6px;
  border: 1px solid var(--panel-border);
  background: var(--input-bg);
  cursor: grab;
  transition: background 0.12s ease, opacity 0.12s ease;
  user-select: none;
}
.channel-order-item:hover { background: color-mix(in srgb, var(--input-bg) 70%, var(--primary-color) 8%); }
.channel-order-item.dragging { opacity: 0.5; cursor: grabbing; }
.order-num {
  min-width: 20px;
  font-size: 0.82rem;
  color: var(--muted-color);
  font-weight: 700;
  text-align: right;
}
.order-name { flex: 1; font-size: 0.88rem; font-weight: 600; }
.drag-handle {
  font-size: 1rem;
  color: var(--muted-color);
  cursor: grab;
}
.channel-order-save-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 10px;
}
.channel-order-save-status {
  font-size: 0.82rem;
}
.channel-order-save-status.save-ok { color: var(--success-color, #4caf50); }
.channel-order-save-status.save-error { color: var(--danger-color, #e53935); }

/* ====================================================================== */
/* Per-channel prefs panel                                                 */
/* ====================================================================== */
.vc-prefs-panel {
  padding: 10px 14px;
  border-top: 1px dashed var(--panel-border);
  background: color-mix(in srgb, var(--input-bg) 80%, var(--primary-color) 5%);
}
.vc-prefs-form { margin: 0; }
.vc-prefs-fields {
  display: flex;
  flex-wrap: wrap;
  gap: 12px 18px;
  align-items: flex-end;
}
.vc-prefs-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 120px;
}
.vc-prefs-field label {
  font-size: 0.81rem;
  font-weight: 600;
  opacity: 0.8;
  white-space: nowrap;
}
.vc-prefs-field-wide { flex: 1; min-width: 200px; }
.vc-prefs-field-wide input[type="text"],
.vc-prefs-field-wide input[type="url"] { width: 100%; }

.zip-status { font-size: 0.81rem; opacity: 0.9; }
.zip-status-ok    { color: #2a9d2a; }
.zip-status-error { color: #c0392b; }
.zip-input { max-width: 120px; }
.tuner-name-input { margin-bottom: 12px; }

/* ====================================================================== */
/* Audio Files                                                             */
/* ====================================================================== */
.audio-upload-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  margin-bottom: 10px;
}
.audio-upload-status { font-size: 0.82rem; opacity: 0.9; }
.audio-upload-status-ok    { color: #2a9d2a; }
.audio-upload-status-error { color: #c0392b; }
.audio-file-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.audio-file-item {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: var(--input-bg);
  border: 1px solid var(--panel-border);
  border-radius: 6px;
}
.audio-file-name {
  font-size: 0.86rem;
  font-weight: 600;
  flex: 1;
  min-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.audio-preview { height: 30px; flex: 1; min-width: 160px; max-width: 300px; }
.audio-file-empty { padding: 4px 0; }

/* ====================================================================== */
/* Misc helpers                                                            */
/* ====================================================================== */
.form-row-inline { display: flex; gap: 8px; align-items: center; margin-top: 10px; }
.divider { border: none; height: 1px; background: var(--panel-border); margin: 12px 0; }
.muted { color: var(--muted-color); }
.small { font-size: 0.86rem; }
.btn-link { background: none; border: none; color: var(--primary-color); cursor: pointer; font-size: 0.88rem; text-decoration: underline; padding: 0; }
.confirm-label { font-size: .9rem; margin-top: 8px; color: var(--label-color); }

/* ====================================================================== */
/* Flash Messages                                                          */
/* ====================================================================== */
.flash-messages-container { margin-bottom: 16px; }
.flash-message {
  position: sticky;
  top: 20px;
  z-index: 1000;
  padding: 11px 38px 11px 18px;
  margin-bottom: 10px;
  border-radius: 6px;
  opacity: 1;
  transition: opacity 0.5s ease;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
.flash-message.fade-out { opacity: 0; }
.flash-content { flex: 1; margin-right: 10px; }
.flash-close {
  background: transparent; border: none; color: inherit; font-size: 22px;
  font-weight: bold; cursor: pointer; padding: 0; width: 22px; height: 22px;
  line-height: 22px; text-align: center; opacity: 0.7; transition: opacity 0.2s ease;
}
.flash-close:hover { opacity: 1; }
.flash-message.flash-success, .flash-message.flash-default {
  background: rgba(34,197,94,0.15); border: 1px solid rgba(34,197,94,0.3); color: rgb(34,197,94);
}
.flash-message.flash-warning {
  background: rgba(251,191,36,0.15); border: 1px solid rgba(251,191,36,0.3); color: rgb(251,191,36);
}
.flash-message.flash-error, .flash-message.flash-danger {
  background: rgba(239,68,68,0.15); border: 1px solid rgba(239,68,68,0.3); color: rgb(239,68,68);
}
.flash-message.flash-info {
  background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.3); color: rgb(59,130,246);
}

/* Dark theme flash */
body.dark .flash-message.flash-success, body.dark .flash-message.flash-default {
  background: rgba(34,197,94,0.2); border: 1px solid rgba(34,197,94,0.4); color: rgb(74,222,128);
}
body.dark .flash-message.flash-warning {
  background: rgba(251,191,36,0.2); border: 1px solid rgba(251,191,36,0.4); color: rgb(253,224,71);
}
body.dark .flash-message.flash-error, body.dark .flash-message.flash-danger {
  background: rgba(239,68,68,0.2); border: 1px solid rgba(239,68,68,0.4); color: rgb(252,165,165);
}
body.dark .flash-message.flash-info {
  background: rgba(59,130,246,0.2); border: 1px solid rgba(59,130,246,0.4); color: rgb(147,197,253);
}

/* ====================================================================== */
/* Theme-specific text color overrides                                     */
/* ====================================================================== */
body.retroiptv .container-change-tuner .page-header h1,
body.retroiptv .container-change-tuner .page-header .lead { color: #48494a !important; }
body.retro-magazine .container-change-tuner .page-header h1,
body.retro-magazine .container-change-tuner .page-header .lead { color: #48494a !important; }
body.directv .container-change-tuner .page-header h1,
body.directv .container-change-tuner .page-header .lead { color: #153a56 !important; }

/* ====================================================================== */
/* Accessibility focus                                                     */
/* ====================================================================== */
button:focus, select:focus, input:focus, textarea:focus {
  outline: 3px solid color-mix(in srgb, var(--primary-color) 30%, transparent 70%);
  outline-offset: 2px;
}

/* ====================================================================== */
/* Responsive                                                              */
/* ====================================================================== */
@media (max-width: 1100px) {
  .tm-layout { grid-template-columns: 1fr; }
}

@media (max-width: 700px) {
  .active-tuner-row { flex-direction: column; }
  .last-sync-box { min-width: unset; width: 100%; }
  .mode-cards { flex-direction: column; }
  .mode-card { min-width: unset; }
  .tuners-table { font-size: 0.8rem; }
  .tuners-table th, .tuners-table td { padding: 6px 6px; }
}

/* Smooth transitions */
.container-change-tuner * {
  transition: background-color .12s ease, color .12s ease, border-color .12s ease !important;
}
